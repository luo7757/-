{"version":3,"sources":["webpack:///C:/Users/luo/Documents/HBuilderProjects/my-project/components/ArticleList/ArticleList.vue?2422","webpack:///C:/Users/luo/Documents/HBuilderProjects/my-project/components/ArticleList/ArticleList.vue?29af","webpack:///C:/Users/luo/Documents/HBuilderProjects/my-project/components/ArticleList/ArticleList.vue?b0fc","webpack:///C:/Users/luo/Documents/HBuilderProjects/my-project/components/ArticleList/ArticleList.vue?4f11","uni-app:///components/ArticleList/ArticleList.vue","webpack:///C:/Users/luo/Documents/HBuilderProjects/my-project/components/ArticleList/ArticleList.vue?3ee0","webpack:///C:/Users/luo/Documents/HBuilderProjects/my-project/components/ArticleList/ArticleList.vue?73f9"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACc;;;AAGxE;AAC8K;AAC9K,gBAAgB,qLAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wLAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAA+pB,CAAgB,6pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACcnrB;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA,qBADA;AAEA;AACA;AACA,iBADA,EADA;;AAIA;AACA,kBADA;AAEA,gBAFA,EAJA,EAFA;;;AAWA,MAXA,kBAWA;AACA;AACA,qBADA;AAEA,kBAFA;AAGA,iBAHA;;AAKA,GAjBA;AAkBA,SAlBA,qBAkBA;AACA;AACA;AACA,GArBA;AAsBA;AACA,aADA,qBACA,QADA,EACA,QADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAZA,EAtBA;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBATA,4BASA,CATA,EASA;AACA;AADA,UAEA,OAFA,GAEA,QAFA,CAEA,OAFA;AAGA;AACA;AACA;AACA;AACA,KAhBA;AAiBA,mBAjBA,2BAiBA,YAjBA,EAiBA;AACA;AACA;AACA;AACA,2BADA;AAEA,sCAFA;AAGA,4BAHA;;AAKA;AACA;AATA,yCAUA;AACA,8DADA;AAEA,yDAFA;AAGA,0CAHA,GAVA,6FAUA,IAVA,CAUA,WAVA,0BAUA,WAVA,CAUA,KAVA,0BAUA,KAVA;;AAeA;AACA;;;;;AAKA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,uBApCA,GAoCA,qCApCA;AAqCA;AACA;AACA;AACA;AACA;AAzCA,4EA0CA,CA3DA;AA4DA,iBA5DA,2BA4DA;AACA;AACA;AACA,iCADA;AAEA;AACA,2BADA;AAEA,8CAFA,EAFA;;;AAOA,4BARA,CAQA;AACA;AACA;AACA;AACA;AACA;AACA,KA3EA,EApCA,E;;;;;;;;;;;;ACxCA;AAAA;AAAA;AAAA;AAAsvC,CAAgB,4qCAAG,EAAC,C;;;;;;;;;;;ACA1wC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/ArticleList/ArticleList.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./ArticleList.vue?vue&type=template&id=07ff9dae&\"\nvar renderjs\nimport script from \"./ArticleList.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/ArticleList/ArticleList.vue\"\nexport default component.exports","export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ArticleList.vue?vue&type=template&id=07ff9dae&\"","var components\ntry {\n  components = {\n    ListItem: function() {\n      return import(\n        /* webpackChunkName: \"components/ListItem/ListItem\" */ \"@/components/ListItem/ListItem.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ArticleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ArticleList.vue?vue&type=script&lang=js&\"","<template>\r\n\t<swiper @change=\"changeActivIndex\" \r\n\t:current=\"index\" class=\"swiper-container\">\r\n\t\t<swiper-item v-for=\"(item, i) in labelList\" \r\n\t\t:key=\"`item-${item._id}`\">\r\n\t\t<!-- labelList用于创建和滑动组件同数量的展示页 -->\r\n\t\t\t<view class=\"swiper-item\">\r\n\t\t\t\t<ListItem :loadData=\"loadData[i]\" :articleList=\"articleData[i]\" @loadmore=\"watchLoadMore\"></ListItem>\r\n\t\t\t</view>\r\n\t\t</swiper-item>\r\n\t</swiper>\r\n</template>\r\n\r\n<script>\r\n\t/*\r\n\t 上拉\r\n\t \r\n\t 这个模块的业务逻辑稍微要复杂一点\r\n\t 在swiper组件下 有多个容器 这些容器承载各类别的信息\r\n\t 初始默认为全部，规定一次请求获取的数据量 pageSzie 这个pageSize 所有容器共用\r\n\t 每个容器使用了 @scrolltolower 方法 这个方法在scroll-view组件上 当容器滑动到底部时触发\r\n\t 容器抛出事件，父级接收\r\n\t 这个时候就有一个问题 多个容器之间都有自己的当前请求数据的位置 和 当前数据请求量\r\n\t 那么在父级用一个对象来保存每一个容器的状态 page、total、loading。\r\n\t 分别决定了 \r\n\t 请求数据的位置、\r\n\t 此分类可以请求的总数据量(达到数据量，不再发送请求)、\r\n\t laoding状态(每次触发触底事件，在发送请求时会有一个loading状态)\r\n\t\r\n\t子级抛出事件 父级接收事件 由当前的index 决定了子级 获取对应的子级信息 \r\n\t可以请求就发送请求，同时就修改当前组件的page值，total值。\r\n\t判断page值 与pageSize计算 是否大于等于 total ，已经达到了，修改loading状态，不再显示loading状态\r\n\t加载动画禁止掉。\r\n\t\r\n\t这个时候就有一个问题了 如果当前的total发生了改变 是在服务器端的改变 前端由于total已经达到最大值的时候\r\n\t请求是无法发送出去的。更新状态、检查是否有新数据\r\n\t\r\n\t可用通过下拉刷新来解决。\r\n\t\r\n\t*/ \r\nexport default {\r\n\tname: 'ArticleList',\r\n\tprops: {\r\n\t\tlabelList: {\r\n\t\t\ttype: Array,\r\n\t\t},\r\n\t\tindex: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0,\r\n\t\t},\r\n\t},\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tarticleData: {},\r\n\t\t\tloadData: {},\r\n\t\t\tpageSize: 6,\r\n\t\t}\r\n\t},\r\n\tcreated(){\r\n\t\t// 初始获取一次\r\n\t\tthis.labelList.length && this._getArticleList(this.index);\r\n\t},\r\n\twatch : {\r\n\t\tlabelList(newValue, oldValue){\r\n\t\t\t// 判断当前label与新的label是否相同，要是相同，不进行重新的数据获取\r\n\t\t\t// 监控当前的分类， 没有新的分类就不更新。\r\n\t\t\t// console.log(newValue, oldValue)\r\n\t\t\tif(JSON.stringify(newValue) === JSON.stringify(oldValue)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 重置 及 重新获取数据\r\n\t\t\tthis.articleData = {};\r\n\t\t\tthis.loadData = {};\r\n\t\t\tthis._getArticleList(this.index);\r\n\t\t}\r\n\t},\r\n\tmethods:{\r\n\t\t// 这里的逻辑处理方式 \r\n\t\t// 由于 分为多个模块\r\n\t\t// 每个模块的内容不同 渲染的时候 首先只渲染当前模块\r\n\t\t// 其余模块内容为空\r\n\t\t// 只有当切换至其模块 才进行模块数据的获取渲染\r\n\t\t// 第一次获取数据后 每次切换 都不在重新获取数据\r\n\t\t// 其实可以使用vue多页应用 来提升使用体验\r\n\t\t// 这样单页组件的数据不会因为组件销毁而销毁 或 多次不必要的重新渲染\r\n\t\tchangeActivIndex(e){\r\n\t\t\t// 每次index 值变化都会触发这个函数\r\n\t\t\tconst { current } = e.detail;\r\n\t\t\tthis.$emit('changeActiveIndex', current);\r\n\t\t\tif(!this.articleData[current] || !this.articleData[current].length){\r\n\t\t\t\tthis._getArticleList(current);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _getArticleList(currentIndex){\r\n\t\t\t// console.log(this.labelList[currentIndex])\r\n\t\t\tif(!this.loadData[currentIndex]){\r\n\t\t\t\tthis.loadData[currentIndex] = {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tloading: 'loading',\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// {data: {articleList, total}}\r\n\t\t\tconst {data: {articleList, total}} = await this.$api.getArticleList({\r\n\t\t\t\tclassify: this.labelList[currentIndex].name,\r\n\t\t\t\tpage: this.loadData[currentIndex].page,\r\n\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t});\r\n\t\t\t// console.log(articleList, total, '测试');\r\n\t\t\t// // #ifdef H5\r\n\t\t\t// const articleList = result.data.articleList;\r\n\t\t\t// const total = result.data.total;\r\n\t\t\t// // #endif\r\n\t\t\t\r\n\t\t\t// // #ifndef H5\r\n\t\t\t// \tconst articleList = result.data.articleList;\r\n\t\t\t// \tconst total = result.data.total;\r\n\t\t\t// // #endif\r\n\t\t\t\r\n\t\t\t// const articleList = result.data.articleList;\r\n\t\t\t// const total = result.data.total;\r\n\t\t\t\r\n\t\r\n\t\t\t// console.log(articleList,total);\r\n\t\t\t// this.articleLoad[currentIndex] = {\r\n\t\t\t// \ttotal : result.data.affectedDocs,\r\n\t\t\t// \tpage : 1,\r\n\t\t\t// \tpageSize: 6,\r\n\t\t\t// }\r\n\t\t\tlet oldList = this.articleData[currentIndex] || [];\r\n\t\t\t// console.log(articleList)\r\n\t\t\toldList.push(...articleList);\r\n\t\t\tthis.loadData[currentIndex].total = total;\r\n\t\t\tthis.$set(this.articleData, currentIndex, oldList);\r\n\t\t\t// console.log(this.articleData)\r\n\t\t},\r\n\t\twatchLoadMore(){\r\n\t\t\tif(this.loadData[this.index].total === this.articleData[this.index].length){\r\n\t\t\t\tthis.loadData[this.index] = {\r\n\t\t\t\t\t...this.loadData[this.index],\r\n\t\t\t\t\t...{\r\n\t\t\t\t\t\tloading: 'noMore',\r\n\t\t\t\t\t\tpage: this.loadData[this.index].page,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$forceUpdate() // 强制更新 解决 vue2 的对象 无法有效监控的问题\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\tthis.loadData[this.index].page ++;\r\n\t\t\t\t// console.log(this.loadData)\r\n\t\t\t\tthis._getArticleList(this.index);\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\npage{\r\n\theight: 100%;\r\n}\r\n.swiper-container {\r\n\theight: 100%;\r\n\t.swiper-item {\r\n\t\theight: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n}\r\n</style>","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ArticleList.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ArticleList.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1645424596333\n      var cssReload = require(\"C:/Users/luo/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}